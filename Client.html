<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Demande Rapide</title>
  <style>
    body { font-family: sans-serif; padding: 2rem; background: #f5f5f5; }
    form { background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 0 10px #ccc; }
    input, textarea, button { display: block; width: 100%; margin-bottom: 1rem; padding: 10px; font-size: 1rem; }
    #confirmation { background: #d4edda; color: #155724; padding: 1rem; border-radius: 5px; display: none; margin-top: 1rem; }
  </style>
</head>
<body>
  <h1>Fais ta demande üëá</h1>
  <form id="formulaire">
    <input type="text" name="nom" placeholder="Nom" required>
    <input type="text" name="prenom" placeholder="Pr√©nom" required>
    <input type="tel" name="numero" placeholder="Num√©ro de t√©l√©phone" required>
    <input type="number" name="budget" placeholder="Budget (‚Ç¨)" required>
    <textarea name="description" placeholder="D√©cris ton besoin" required></textarea>
    <button type="submit">Envoyer la demande</button>
  </form>

  <div id="confirmation"></div>

  <script>
    const webhookURL = "https://discord.com/api/webhooks/1362141424702718003/3WQtcjqXjR2TklZQXinznH8pnYbuTO7yDrOG4mNy9CptkOETqY8bexu94dz-yhzW5mHW"; // ‚Üê remplace ici

    function generateCommandeID() {
      const rand = Math.floor(10000 + Math.random() * 90000); // 5 chiffres
      return `CMD-${rand}`;
    }

    document.getElementById('formulaire').addEventListener('submit', async function(e) {
      e.preventDefault();
      const data = new FormData(e.target);
      const nom = data.get('nom');
      const prenom = data.get('prenom');
      const numero = data.get('numero');
      const budget = data.get('budget');
      const description = data.get('description');

      const commandeID = generateCommandeID();

      const content = `üì® **Nouvelle Demande #${commandeID} :**\n
**Nom :** ${nom}\n
**Pr√©nom :** ${prenom}\n
**T√©l√©phone :** ${numero}\n
**Budget :** ${budget}‚Ç¨\n
**Description :** ${description}`;

      const payload = { content };

      const res = await fetch(webhookURL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
      });

      const confirmationBox = document.getElementById("confirmation");

      if (res.ok) {
        confirmationBox.style.display = "block";
        confirmationBox.innerHTML = `‚úÖ Ta demande a bien √©t√© envoy√©e !<br><strong>ID de commande :</strong> <code>${commandeID}</code>`;
        e.target.reset();
      } else {
        confirmationBox.style.display = "block";
        confirmationBox.style.background = "#f8d7da";
        confirmationBox.style.color = "#721c24";
        confirmationBox.innerHTML = "‚ùå Une erreur est survenue. Essaie plus tard.";
      }
    });
  </script>
</body>
</html>
